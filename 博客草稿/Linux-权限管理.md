---
title: Linux 权限管理
date: 2016-09-30 14:24:23
tags: Linux
category: Linux
---


## 基本权限

- `drwxrw-r--`
	- d 文件类型
	- r 读
	- w 写
	- x 执行
	- rwx 代表所有者权限
	- rw- 代表所属组权限
	- r-- 代表其他人权限
- 权限作用
	- 权限对文件的作用：
		- r 读取文件内容
		- w 编辑、新增、修改文件内容，但是不能删除文件
		- x 可执行
	- 权限对目录的作用：
		- r 可以查询目录下文件名（ls）
		- w 具有修改目录结构的权限。如新建文件和目录，删除此目录下文件和目录，重命名此目录下文件和目录，剪切（touch rm mv cp）
		- x 可以进入目录（cd）
	- 区别：
		- 对文件来讲，最高权限是 x
		- 对目录来讲，最高权限是 w
- 权限命令
	- chmod
	- `chmod [选项] 模式 文件名`
		- 选项：
			- \-R 递归
		- 模式：
			- `[ugoa] [+.=] [rwx]`
			- `[mode=421]`
		- 例子：
			- `chmod u+x cangls.av`
			- `chmod a=rwx fengjie.av`
			- `chmod g+w,o+w furong.av`
		- 权限的数字表示
			- r 4
			- w 2
			- x 1
	- chgrp
		- `chgrp 组名 文件名` 修改文件的所属组
	- chown
		- `chown 用户名 文件名` 修改文件的所有者


## 默认权限

- umask 查看默认权限
	- 0022
		- 第一位 0：文件特殊权限
		- 022：文件默认权限
- 修改 umask 值
	- 临时修改
		- umask 0002
	- 永久修改
		- vim /etc/profile

文件的默认权限特点

- 文件默认不能建立为执行文件，必须手工赋予执行权限
- 文件默认权限最大为 666
- 默认权限需要换算成字母再相减
- 建立文件之后的默认权限，为 666 减去 umask 值
	- 例子：
		- 文件默认最大权限 666，umask 值 022
		- `-rw-rw-rw- 减去 -----w--w- 等于 -rw-r--r--`，结果为 644
		- `-rw-rw-rw- 键入 -----wx-wx 等于 -rw-r--r--`，结果为 644


目录的默认权限特点

- 目录默认权限最大为 777
- 默认权限需要换算成字母再相减
- 建立文件之后的默认权限，为 777 减去 umask 值
	- 例子：
		- 目录默认最大权限为 777，umask 值 022
		- `-rwxrwxrwx 减去 -----w--w- 等于 -rwxr-xr-x`，结果为 755
